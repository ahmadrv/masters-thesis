\usepackage[colorinlistoftodos, textwidth=2.5cm]{todonotes}
\usepackage[colorlinks,linkcolor=black,citecolor=black]{hyperref}
\usepackage{setspace}

\usepackage[top=3.5cm,right=3cm,bottom=4cm,left=3cm]{geometry}
\usepackage{soul}
\usepackage{pgfplots}
\usepackage{tikz}              % TikZ package
\usetikzlibrary{calc}          % Add the calc library for coordinate calculations
\pgfplotsset{compat=1.18}      % Adjust version if needed
\usepackage{adjustbox}          % Package to adjust figure size

\usepackage{amsmath}
\usepackage[marginal,stable,bottom]{footmisc}     
\usepackage{zref-perpage}
\usepackage{perpage}                                             
\MakePerPage{footnote}
\usepackage{cite}                                
\usepackage{setspace}                                            
\allowdisplaybreaks                                                 
\usepackage{parskip}                                             
\usepackage[dvipsnames]{xcolor}
\usepackage{amsmath}
\usepackage{makeidx}	
\usepackage{verbatim}

\usepackage{graphicx}
\usepackage{caption}
\usepackage{ifthen}

\usepackage{enumitem}

\usepackage{qcircuit}
\newcommand{\ket}[1]{\left| #1 \right\rangle}

\usepackage{colortbl}
\usepackage{xcolor}
\usepackage{array}
\usepackage{caption}
\usepackage{subcaption}


 \parindent0pt


\makeatletter
\pdfstringdefDisableCommands{%
\let\lr\@firstofone
}
\makeatother
% ----------------------------------------------------------------------------
\usepackage{xepersian}

\usepackage[Lenny]{fncychap}

\usepackage{fontspec}

\setcounter{secnumdepth}{0}  % Turn off section numbering
\setcounter{tocdepth}{2}     % Include sections in TOC without numbering

\settextfont[Scale=1.07]{XB Niloofar}[ 
    Path=./XB Niloofar font family/,
   Extension = .ttf,
    UprightFont=*,
    BoldFont=*Bd,
    ItalicFont=*It,
    BoldItalicFont=*BdIt
    ]
\setlatintextfont[Scale=1.05]{XB Niloofar} 

\ExplSyntaxOn
\cs_set_eq:NN
\etex_iffontchar:D
\tex_iffontchar:D
\cs_undefine:N \c_one
\int_const:Nn \c_one { 1 }
\ExplSyntaxOff

\setdigitfont[Scale=1.05]{Yas}[ 
    Path=./Yas font/,
    Extension = .ttf,
    UprightFont=*,
    BoldFont=* Bd,
    ItalicFont=* It,
    BoldItalicFont=* BdIt
    ]
% قلم برای اعداد به صورت فارسی با صفر توخالی، در صورتی که بخواهیم اعداد انگلیسی نوشته شوند این خط را غیر فعال می‌کنیم.

\defpersianfont\nastaliq[Scale=2.0]{IranNastaliq}[ 
    Path=./Iran Nastaliq font/,
    Extension = .ttf,
    UprightFont=*,
    BoldFont=*,
    ItalicFont=*,
    BoldItalicFont=*
    ]
% % قلم برای نوشتن تقدیم
\defpersianfont\nastaliqone[Scale=1.0]{IranNastaliq}[ 
    Path=./Iran Nastaliq font/,
    Extension = .ttf,
    UprightFont=*,
    BoldFont=*,
    ItalicFont=*,
    BoldItalicFont=*
    ]
% قلم نستعلیق با سایز متناسب با متن در صورت نیاز
\defpersianfont\anotherfont[Scale=1.2]{XP Ziba}[ 
    Path=./XB Ziba font family/,
    Extension = .ttf,
    UprightFont=*,
    BoldFont=*Bd,
    ItalicFont=*It,
    BoldItalicFont=*BdIt
    ]
% قلم برای نوشتن تشکر (قلم فانتزی)
\newenvironment{fantezi}
{\anotherfont }


\makeindex


\def\beginto{
\newpage
\begin{RTL}
\begin{Huge}


\begin{center}
\vspace*{0.15cm}

}

\def\endto{
~
\end{center}
\end{Huge}
\end{RTL}
}

\def\beginthanks{
\newpage

{\centering\Huge{}}
}

\def\endthanks{
~
}

\def\thanks{
\beginthanks
		\vspace*{\fill}
		\input{thanks}
		\vspace*{\fill}
\endthanks
}

\def\startpage{
\newpage
\vspace*{3cm}
\begin{center}
\includegraphics[width=12cm]{besm}
\end{center}
}
\makeatletter
\def\@makechapterhead#1{%
  \vspace*{50\p@}%
  {\parindent \z@ \centering\normalfont
    \ifnum \c@secnumdepth >\m@ne
      \if@mainmatter
        \huge\bfseries \@chapapp\space \tartibi{chapter} 
        \par\nobreak
        \vskip 20\p@
      \fi
    \fi
    \interlinepenalty\@M
    \Huge \bfseries #1\par\nobreak
    \vskip 40\p@
  }}
\def\@makeschapterhead#1{%
  \vspace*{50\p@}%
  {\parindent \z@ \centering
    \normalfont
    \interlinepenalty\@M
    \Huge \bfseries  #1\par\nobreak
    \vskip 40\p@
  }}
\makeatother



\renewcommand\bibname{مراجع}
\def\contentsname{فهرست}

% some extra diffinitions %%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\def\bea{\begin{eqnarray}}
\def\eea{\end{eqnarray}}

\def\ba{\begin{array}}
\def\ea{\end{array}}

\def\ni{\noindent}
\def\nn{\nonumber}

\def\bc{\begin{center}}
\def\ec{\end{center}}

\presetkeys{todonotes}{
	align=left,     % Align text within the todo note
	size=\tiny,       % Set the font size for todo notes
	caption={\textbf{Todo}}, % Add a custom caption or title for each note
}{}

\newcommand{\ttodo}[2][]{
	\todo[#1]{
		\begin{spacing}{0.5}
			#2
		\end{spacing}
	}
}